<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of inputgui</title>
  <meta name="keywords" content="inputgui">
  <meta name="description" content="inputgui() - A comprehensive gui automatic builder. This function helps">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../../index.html">Home</a> &gt;  <a href="#">code</a> &gt; <a href="../index.html">arguments</a> &gt; <a href="index.html">private</a> &gt; inputgui.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../../index.html"><img alt="<" border="0" src="../../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for code/arguments/private&nbsp;<img alt=">" border="0" src="../../../right.png"></a></td></tr></table>-->

<h1>inputgui

</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>inputgui() - A comprehensive gui automatic builder. This function helps</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>function [result, userdat, strhalt, resstruct] = inputgui( varargin); </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre class="comment"> inputgui() - A comprehensive gui automatic builder. This function helps
              to create GUI very quickly without bothering about the 
              positions of the elements. After creating a geometry, 
              elements just place themselves in the predefined 
              locations. It is especially useful for figures in which 
              you intend to put text buttons and descriptions.

 Usage:
   &gt;&gt; [ outparam ] = inputgui( 'key1', 'val1', 'key2', 'val2', ... );
   &gt;&gt; [ outparam userdat strhalt outstruct] = ...
             inputgui( 'key1', 'val1', 'key2', 'val2', ... );
 
 Inputs:
   'geom '      - cell array of cell array of integer vector. Each cell
                  array defines the coordinate of a given input in the 
                  following manner: { nb_row nb_col [x_topcorner y_topcorner]
                  [x_bottomcorner y_bottomcorner] };
   'geometry'   - cell array describing horizontal geometry. This corresponds 
                  to the supergui function input 'geomhoriz'
   'geomvert'   - vertical geometry argument, this argument is passed on to
                  the supergui function
   'uilist'     - list of uicontrol lists describing elements properties
                  { { ui1 }, { ui2 }... }, { 'uiX' } being GUI matlab 
                  uicontrol arguments such as { 'style', 'radiobutton', 
                  'String', 'hello' }. See Matlab function uicontrol() for details.
   'helpcom'    - optional help command 
   'title'      - optional figure title
   'userdata'   - optional userdata input for the figure
   'mode'       - ['normal'|'noclose'|'plot' fignumber]. Either wait for
                  user to press OK or CANCEL ('normal'), return without
                  closing window input ('noclose'), only draw the gui ('plot')
                  or process an existing window which number is given as 
                  input (fignumber). Default is 'normal'.
   'eval'       - [string] command to evaluate at the end of the creation 
                  of the GUI but before waiting for user input. 

 Output:
   outparam   - list of outputs. The function scans all lines and
                add up an output for each interactive uicontrol, i.e
                edit box, radio button, checkbox and listbox.
   userdat    - 'userdata' value of the figure.
   strhalt    - the function returns when the 'userdata' field of the
                button with the tag 'ok' is modified. This returns the
                new value of this field.
   outstruct  - returns outputs as a structure (only tagged ui controls
                are considered). The field name of the structure is
                the tag of the ui and contain the ui value or string.

 Note: the function also adds three buttons at the bottom of each 
       interactive windows: 'CANCEL', 'HELP' (if callback command
       is provided) and 'OK'.

 Example:
   res = inputgui('geometry', { 1 1 }, 'uilist', ...
                         { { 'style' 'text' 'string' 'Enter a value' } ...
                           { 'style' 'edit' 'string' '' } });

   res = inputgui('geom', { {2 1 [0 0] [1 1]} {2 1 [1 0] [1 1]} }, 'uilist', ...
                         { { 'style' 'text' 'string' 'Enter a value' } ...
                           { 'style' 'edit' 'string' '' } });

 Author: Arnaud Delorme, CNL / Salk Institute, La Jolla, 1 Feb 2002

 See also: supergui(), eeglab()</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../matlabicon.gif)">

<li><a href="finputcheck.html" class="code" title="function [g, varargnew] = finputcheck( vararg, fieldlist, callfunc, mode, verbose )">finputcheck</a>	finputcheck() - check Matlab function {'key','value'} input argument pairs</li>
<li><a href="inputgui.html" class="code" title="function [result, userdat, strhalt, resstruct] = inputgui( varargin);">inputgui</a>	inputgui() - A comprehensive gui automatic builder. This function helps</li>
<li><a href="supergui.html" class="code" title="function [handlers, outheight, allhandlers] = supergui( varargin);">supergui</a>	supergui() - a comprehensive gui automatic builder. This function help</li>
</ul>
This function is called by:
<ul style="list-style-image:url(../../../matlabicon.gif)">

<li><a href="inputgui.html" class="code" title="function [result, userdat, strhalt, resstruct] = inputgui( varargin);">inputgui</a>	inputgui() - A comprehensive gui automatic builder. This function helps</li>
</ul>
<!-- crossreference -->


<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<ul style="list-style-image:url(../../../matlabicon.gif)">

<li><a href="#_sub1" class="code">function keycallback(fig,hObject,eventdata)</a></li>
<li><a href="#_sub2" class="code">function g = myguihandles(fig)</a></li>
</ul>




<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre>0001 <span class="comment">% inputgui() - A comprehensive gui automatic builder. This function helps</span>
0002 <span class="comment">%              to create GUI very quickly without bothering about the</span>
0003 <span class="comment">%              positions of the elements. After creating a geometry,</span>
0004 <span class="comment">%              elements just place themselves in the predefined</span>
0005 <span class="comment">%              locations. It is especially useful for figures in which</span>
0006 <span class="comment">%              you intend to put text buttons and descriptions.</span>
0007 <span class="comment">%</span>
0008 <span class="comment">% Usage:</span>
0009 <span class="comment">%   &gt;&gt; [ outparam ] = inputgui( 'key1', 'val1', 'key2', 'val2', ... );</span>
0010 <span class="comment">%   &gt;&gt; [ outparam userdat strhalt outstruct] = ...</span>
0011 <span class="comment">%             inputgui( 'key1', 'val1', 'key2', 'val2', ... );</span>
0012 <span class="comment">%</span>
0013 <span class="comment">% Inputs:</span>
0014 <span class="comment">%   'geom '      - cell array of cell array of integer vector. Each cell</span>
0015 <span class="comment">%                  array defines the coordinate of a given input in the</span>
0016 <span class="comment">%                  following manner: { nb_row nb_col [x_topcorner y_topcorner]</span>
0017 <span class="comment">%                  [x_bottomcorner y_bottomcorner] };</span>
0018 <span class="comment">%   'geometry'   - cell array describing horizontal geometry. This corresponds</span>
0019 <span class="comment">%                  to the supergui function input 'geomhoriz'</span>
0020 <span class="comment">%   'geomvert'   - vertical geometry argument, this argument is passed on to</span>
0021 <span class="comment">%                  the supergui function</span>
0022 <span class="comment">%   'uilist'     - list of uicontrol lists describing elements properties</span>
0023 <span class="comment">%                  { { ui1 }, { ui2 }... }, { 'uiX' } being GUI matlab</span>
0024 <span class="comment">%                  uicontrol arguments such as { 'style', 'radiobutton',</span>
0025 <span class="comment">%                  'String', 'hello' }. See Matlab function uicontrol() for details.</span>
0026 <span class="comment">%   'helpcom'    - optional help command</span>
0027 <span class="comment">%   'title'      - optional figure title</span>
0028 <span class="comment">%   'userdata'   - optional userdata input for the figure</span>
0029 <span class="comment">%   'mode'       - ['normal'|'noclose'|'plot' fignumber]. Either wait for</span>
0030 <span class="comment">%                  user to press OK or CANCEL ('normal'), return without</span>
0031 <span class="comment">%                  closing window input ('noclose'), only draw the gui ('plot')</span>
0032 <span class="comment">%                  or process an existing window which number is given as</span>
0033 <span class="comment">%                  input (fignumber). Default is 'normal'.</span>
0034 <span class="comment">%   'eval'       - [string] command to evaluate at the end of the creation</span>
0035 <span class="comment">%                  of the GUI but before waiting for user input.</span>
0036 <span class="comment">%</span>
0037 <span class="comment">% Output:</span>
0038 <span class="comment">%   outparam   - list of outputs. The function scans all lines and</span>
0039 <span class="comment">%                add up an output for each interactive uicontrol, i.e</span>
0040 <span class="comment">%                edit box, radio button, checkbox and listbox.</span>
0041 <span class="comment">%   userdat    - 'userdata' value of the figure.</span>
0042 <span class="comment">%   strhalt    - the function returns when the 'userdata' field of the</span>
0043 <span class="comment">%                button with the tag 'ok' is modified. This returns the</span>
0044 <span class="comment">%                new value of this field.</span>
0045 <span class="comment">%   outstruct  - returns outputs as a structure (only tagged ui controls</span>
0046 <span class="comment">%                are considered). The field name of the structure is</span>
0047 <span class="comment">%                the tag of the ui and contain the ui value or string.</span>
0048 <span class="comment">%</span>
0049 <span class="comment">% Note: the function also adds three buttons at the bottom of each</span>
0050 <span class="comment">%       interactive windows: 'CANCEL', 'HELP' (if callback command</span>
0051 <span class="comment">%       is provided) and 'OK'.</span>
0052 <span class="comment">%</span>
0053 <span class="comment">% Example:</span>
0054 <span class="comment">%   res = inputgui('geometry', { 1 1 }, 'uilist', ...</span>
0055 <span class="comment">%                         { { 'style' 'text' 'string' 'Enter a value' } ...</span>
0056 <span class="comment">%                           { 'style' 'edit' 'string' '' } });</span>
0057 <span class="comment">%</span>
0058 <span class="comment">%   res = inputgui('geom', { {2 1 [0 0] [1 1]} {2 1 [1 0] [1 1]} }, 'uilist', ...</span>
0059 <span class="comment">%                         { { 'style' 'text' 'string' 'Enter a value' } ...</span>
0060 <span class="comment">%                           { 'style' 'edit' 'string' '' } });</span>
0061 <span class="comment">%</span>
0062 <span class="comment">% Author: Arnaud Delorme, CNL / Salk Institute, La Jolla, 1 Feb 2002</span>
0063 <span class="comment">%</span>
0064 <span class="comment">% See also: supergui(), eeglab()</span>
0065 
0066 <span class="comment">% Copyright (C) Arnaud Delorme, CNL/Salk Institute, 27 Jan 2002, arno@salk.edu</span>
0067 <span class="comment">%</span>
0068 <span class="comment">% This program is free software; you can redistribute it and/or modify</span>
0069 <span class="comment">% it under the terms of the GNU General Public License as published by</span>
0070 <span class="comment">% the Free Software Foundation; either version 2 of the License, or</span>
0071 <span class="comment">% (at your option) any later version.</span>
0072 <span class="comment">%</span>
0073 <span class="comment">% This program is distributed in the hope that it will be useful,</span>
0074 <span class="comment">% but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
0075 <span class="comment">% MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
0076 <span class="comment">% GNU General Public License for more details.</span>
0077 <span class="comment">%</span>
0078 <span class="comment">% You should have received a copy of the GNU General Public License</span>
0079 <span class="comment">% along with this program; if not, write to the Free Software</span>
0080 <span class="comment">% Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</span>
0081 
0082 <a name="_sub0" href="#_subfunctions" class="code">function [result, userdat, strhalt, resstruct] = inputgui( varargin);</a>
0083 
0084 <span class="keyword">if</span> nargin &lt; 2
0085    help <a href="inputgui.html" class="code" title="function [result, userdat, strhalt, resstruct] = inputgui( varargin);">inputgui</a>;
0086    <span class="keyword">return</span>;
0087 <span class="keyword">end</span>;    
0088 
0089 <span class="comment">% decoding input and backward compatibility</span>
0090 <span class="comment">% -----------------------------------------</span>
0091 <span class="keyword">if</span> isstr(varargin{1})
0092     options = varargin;
0093 <span class="keyword">else</span>
0094     options = { <span class="string">'geometry'</span> <span class="string">'uilist'</span> <span class="string">'helpcom'</span> <span class="string">'title'</span> <span class="string">'userdata'</span> <span class="string">'mode'</span> <span class="string">'geomvert'</span> };
0095     options = { options{1:length(varargin)}; varargin{:} };
0096     options = options(:)';
0097 <span class="keyword">end</span>;
0098 
0099 <span class="comment">% checking inputs</span>
0100 <span class="comment">% ---------------</span>
0101 g = <a href="finputcheck.html" class="code" title="function [g, varargnew] = finputcheck( vararg, fieldlist, callfunc, mode, verbose )">finputcheck</a>(options, { <span class="string">'geom'</span>     <span class="string">'cell'</span>                []      {}; <span class="keyword">...</span>
0102                            <span class="string">'geometry'</span> {<span class="string">'cell'</span>,<span class="string">'integer'</span>}    []      []; <span class="keyword">...</span>
0103                            <span class="string">'uilist'</span>   <span class="string">'cell'</span>                []      {}; <span class="keyword">...</span>
0104                            <span class="string">'helpcom'</span>  { <span class="string">'string'</span> <span class="string">'cell'</span> }   { [] [] }      <span class="string">''</span>; <span class="keyword">...</span>
0105                            <span class="string">'title'</span>    <span class="string">'string'</span>              []      <span class="string">''</span>; <span class="keyword">...</span>
0106                            <span class="string">'eval'</span>     <span class="string">'string'</span>              []      <span class="string">''</span>; <span class="keyword">...</span>
0107                            <span class="string">'userdata'</span> <span class="string">''</span>                    []      []; <span class="keyword">...</span>
0108                            <span class="string">'getresult'</span> <span class="string">'real'</span>               []      []; <span class="keyword">...</span>
0109                            <span class="string">'mode'</span>     <span class="string">''</span>                    []      <span class="string">'normal'</span>; <span class="keyword">...</span>
0110                            <span class="string">'geomvert'</span> <span class="string">'real'</span>                []       [] <span class="keyword">...</span>
0111                           }, <span class="string">'inputgui'</span>);
0112 <span class="keyword">if</span> isstr(g), error(g); <span class="keyword">end</span>;
0113 
0114 <span class="keyword">if</span> isempty(g.getresult)
0115     <span class="keyword">if</span> isstr(g.mode)
0116         fig = figure(<span class="string">'visible'</span>, <span class="string">'off'</span>);
0117         set(fig, <span class="string">'name'</span>, g.title);
0118         set(fig, <span class="string">'userdata'</span>, g.userdata);
0119         set(fig, <span class="string">'KeyPressFcn'</span>,@(varargin)<a href="#_sub1" class="code" title="subfunction keycallback(fig,hObject,eventdata)">keycallback</a>(fig,varargin{:}))
0120         <span class="keyword">if</span> ~iscell( g.geometry )
0121             oldgeom = g.geometry;
0122             g.geometry = {};
0123             <span class="keyword">for</span> row = 1:length(oldgeom)
0124                 g.geometry = { g.geometry{:} ones(1, oldgeom(row)) };
0125             <span class="keyword">end</span>;
0126         <span class="keyword">end</span>
0127         g.geometry = { g.geometry{:} [1] [1 1 1] }; <span class="comment">% add button to geometry</span>
0128         <span class="keyword">if</span> ~isempty(g.geom)
0129             <span class="keyword">for</span> ind = 1:length(g.geom)
0130                 g.geom{ind}{2} = g.geom{ind}{2}+2;
0131             <span class="keyword">end</span>;
0132             g.geom = { g.geom{:} <span class="keyword">...</span>
0133                       {1 g.geom{1}{2} [0 g.geom{1}{2}-2] [1 1] } <span class="keyword">...</span><span class="comment"> </span>
0134                       {3 g.geom{1}{2} [0 g.geom{1}{2}-1] [1 1] } <span class="keyword">...</span><span class="comment"> </span>
0135                       {3 g.geom{1}{2} [1 g.geom{1}{2}-1] [1 1] } <span class="keyword">...</span>
0136                       {3 g.geom{1}{2} [2 g.geom{1}{2}-1] [1 1] } };
0137         <span class="keyword">end</span>;
0138 
0139         <span class="comment">% add the three buttons (CANCEL HELP OK) at the bottom of the GUI</span>
0140         <span class="comment">% ---------------------------------------------------------------</span>
0141         g.uilist = { g.uilist{:}, {} };
0142         options = { <span class="string">'width'</span> 80 <span class="string">'stickto'</span> <span class="string">'on'</span> };
0143         <span class="keyword">if</span> ~isempty(g.helpcom)
0144             <span class="keyword">if</span> ~iscell(g.helpcom) | isempty(g.geom)
0145                 g.uilist = { g.uilist{:}, { <span class="string">'width'</span> 80 <span class="string">'align'</span> <span class="string">'left'</span> <span class="string">'Style'</span>, <span class="string">'pushbutton'</span>, <span class="string">'string'</span>, <span class="string">'Help'</span>, <span class="string">'tag'</span>, <span class="string">'help'</span>, <span class="string">'callback'</span>, g.helpcom } };
0146             <span class="keyword">else</span>
0147                 g.uilist = { g.uilist{:}, { <span class="string">'width'</span> 80 <span class="string">'align'</span> <span class="string">'left'</span> <span class="string">'Style'</span>, <span class="string">'pushbutton'</span>, <span class="string">'string'</span>, <span class="string">'Help gui'</span>, <span class="string">'callback'</span>, g.helpcom{1} } };
0148                 g.uilist = { g.uilist{:}, { <span class="string">'width'</span> 80 <span class="string">'align'</span> <span class="string">'left'</span> <span class="string">'Style'</span>, <span class="string">'pushbutton'</span>, <span class="string">'string'</span>, <span class="string">'More help'</span>, <span class="string">'callback'</span>, g.helpcom{2} } };
0149                 g.geometry{end} = [1 1 1 1];
0150             <span class="keyword">end</span>;
0151         <span class="keyword">else</span>
0152             g.uilist = { g.uilist{:}, {} };
0153         <span class="keyword">end</span>;
0154         g.uilist = { g.uilist{:}, { <span class="string">'width'</span> 80 <span class="string">'align'</span> <span class="string">'right'</span> <span class="string">'Style'</span>, <span class="string">'pushbutton'</span>, <span class="string">'string'</span>, <span class="string">'Cancel'</span>, <span class="string">'tag'</span> <span class="string">'cancel'</span> <span class="string">'callback'</span>, <span class="string">'close gcbf'</span> } };
0155         g.uilist = { g.uilist{:}, { <span class="string">'width'</span> 80 <span class="string">'align'</span> <span class="string">'right'</span> <span class="string">'stickto'</span> <span class="string">'on'</span> <span class="string">'Style'</span>, <span class="string">'pushbutton'</span>, <span class="string">'tag'</span>, <span class="string">'ok'</span>, <span class="string">'string'</span>, <span class="string">'OK'</span>, <span class="string">'callback'</span>, <span class="string">'set(gcbo, ''userdata'', ''retuninginputui'');'</span> } };
0156         <span class="keyword">if</span> ~isempty(g.geom)
0157             [tmp tmp2 allobj] = <a href="supergui.html" class="code" title="function [handlers, outheight, allhandlers] = supergui( varargin);">supergui</a>( <span class="string">'fig'</span>, fig, <span class="string">'minwidth'</span>, 200, <span class="string">'geom'</span>, g.geom, <span class="string">'uilist'</span>, g.uilist );
0158         <span class="keyword">elseif</span> isempty(g.geomvert)
0159             [tmp tmp2 allobj] = <a href="supergui.html" class="code" title="function [handlers, outheight, allhandlers] = supergui( varargin);">supergui</a>( <span class="string">'fig'</span>, fig, <span class="string">'minwidth'</span>, 200, <span class="string">'geomhoriz'</span>, g.geometry, <span class="string">'uilist'</span>, g.uilist );
0160         <span class="keyword">else</span>
0161             [tmp tmp2 allobj] = <a href="supergui.html" class="code" title="function [handlers, outheight, allhandlers] = supergui( varargin);">supergui</a>( <span class="string">'fig'</span>, fig, <span class="string">'minwidth'</span>, 200, <span class="string">'geomhoriz'</span>, g.geometry, <span class="string">'uilist'</span>, g.uilist, <span class="string">'geomvert'</span>, [g.geomvert(:)' 1 1] );
0162         <span class="keyword">end</span>;
0163     <span class="keyword">else</span> 
0164         fig = g.mode;
0165         set(findobj(<span class="string">'parent'</span>, fig, <span class="string">'tag'</span>, <span class="string">'ok'</span>), <span class="string">'userdata'</span>, []);
0166         allobj = findobj(<span class="string">'parent'</span>,fig);
0167         allobj = allobj(end:-1:1);
0168     <span class="keyword">end</span>;
0169 
0170     <span class="comment">% evaluate command before waiting?</span>
0171     <span class="comment">% --------------------------------</span>
0172     <span class="keyword">if</span> ~isempty(g.eval), eval(g.eval); <span class="keyword">end</span>;
0173 
0174     <span class="comment">% create figure and wait for return</span>
0175     <span class="comment">% ---------------------------------</span>
0176     <span class="keyword">if</span> isstr(g.mode) &amp; (strcmpi(g.mode, <span class="string">'plot'</span>) | strcmpi(g.mode, <span class="string">'return'</span>) )
0177         <span class="keyword">if</span> strcmpi(g.mode, <span class="string">'plot'</span>)
0178            <span class="keyword">return</span>; <span class="comment">% only plot and returns</span>
0179         <span class="keyword">end</span>;
0180     <span class="keyword">else</span> 
0181         waitfor( findobj(<span class="string">'parent'</span>, fig, <span class="string">'tag'</span>, <span class="string">'ok'</span>), <span class="string">'userdata'</span>);
0182     <span class="keyword">end</span>;
0183 <span class="keyword">else</span>
0184     fig = g.getresult;
0185     allobj = findobj(<span class="string">'parent'</span>,fig);
0186     allobj = allobj(end:-1:1);
0187 <span class="keyword">end</span>;
0188 
0189 result = {};
0190 userdat = [];
0191 strhalt = <span class="string">''</span>;
0192 resstruct = [];
0193 <span class="keyword">try</span>, findobj(fig); <span class="comment">% figure still exist ?</span>
0194 <span class="keyword">catch</span>, <span class="keyword">return</span>; <span class="keyword">end</span>;
0195 strhalt = get(findobj(<span class="string">'parent'</span>, fig, <span class="string">'tag'</span>, <span class="string">'ok'</span>), <span class="string">'userdata'</span>);
0196 
0197 <span class="comment">% output parameters</span>
0198 <span class="comment">% -----------------</span>
0199 counter = 1;
0200 <span class="keyword">for</span> index=1:length(allobj)
0201    <span class="keyword">try</span>,
0202       objstyle = get(allobj( index ), <span class="string">'style'</span>);
0203       <span class="keyword">switch</span> lower( objstyle )
0204       <span class="keyword">case</span> { <span class="string">'listbox'</span>, <span class="string">'checkbox'</span>, <span class="string">'radiobutton'</span> <span class="string">'popupmenu'</span> }
0205          result{counter} = get( allobj( index ), <span class="string">'value'</span>);
0206          counter = counter+1;
0207       <span class="keyword">case</span> <span class="string">'edit'</span> 
0208          result{counter} = get( allobj( index ), <span class="string">'string'</span>);
0209          counter = counter+1;
0210       <span class="keyword">end</span>;
0211    <span class="keyword">catch</span>, <span class="keyword">end</span>;
0212 <span class="keyword">end</span>;   
0213 <span class="keyword">try</span>
0214     userdat = get(fig, <span class="string">'userdata'</span>);
0215 <span class="keyword">catch</span>
0216 <span class="keyword">end</span>
0217 <span class="keyword">if</span> nargout &gt;= 4
0218     resstruct = <a href="#_sub2" class="code" title="subfunction g = myguihandles(fig)">myguihandles</a>(fig);
0219 <span class="keyword">end</span>;
0220 
0221 <span class="keyword">if</span> isempty(g.getresult) &amp;&amp; isstr(g.mode) &amp;&amp; ( strcmp(g.mode, <span class="string">'normal'</span>) || strcmp(g.mode, <span class="string">'return'</span>) )
0222     <span class="keyword">try</span>
0223         close(fig);
0224     <span class="keyword">catch</span>
0225     <span class="keyword">end</span>
0226 <span class="keyword">end</span>;
0227 drawnow; <span class="comment">% for windows</span>
0228 
0229 <a name="_sub1" href="#_subfunctions" class="code">function keycallback(fig,hObject,eventdata)</a>
0230 <span class="keyword">if</span> strcmp(eventdata.Key,<span class="string">'return'</span>)
0231     set(findobj(<span class="string">'parent'</span>,fig,<span class="string">'tag'</span>,<span class="string">'ok'</span>), <span class="string">'userdata'</span>, <span class="string">'retuninginputui'</span>); <span class="keyword">end</span>
0232 <span class="keyword">if</span> strcmp(eventdata.Key,<span class="string">'escape'</span>)
0233     close(gcbf); <span class="keyword">end</span>
0234     
0235 
0236 <span class="comment">%g.uilist = { g.uilist{:}, { 'width' 80 'align' 'right' 'Style', 'pushbutton', 'string', 'Cancel', 'tag' 'cancel' 'callback', 'close gcbf' } };</span>
0237 <span class="comment">%g.uilist = { g.uilist{:}, { 'width' 80 'align' 'right' 'stickto' 'on' 'Style', 'pushbutton', 'tag', 'ok', 'string', 'OK', 'callback', 'set(gcbo, ''userdata'', ''retuninginputui'');' } };</span>
0238 
0239 
0240 <span class="comment">% function for gui res</span>
0241 <span class="comment">% --------------------</span>
0242 <a name="_sub2" href="#_subfunctions" class="code">function g = myguihandles(fig)</a>
0243     g = [];
0244     h = findobj(<span class="string">'parent'</span>, fig);
0245     <span class="keyword">for</span> index = 1:length(h)
0246         <span class="keyword">if</span> ~isempty(get(h(index), <span class="string">'tag'</span>))
0247             <span class="keyword">try</span>, 
0248                 <span class="keyword">switch</span> get(h(index), <span class="string">'style'</span>)
0249                  <span class="keyword">case</span> <span class="string">'edit'</span>, g = setfield(g, get(h(index), <span class="string">'tag'</span>), get(h(index), <span class="string">'string'</span>));
0250                  <span class="keyword">case</span> { <span class="string">'value'</span> <span class="string">'radio'</span> <span class="string">'checkbox'</span> <span class="string">'listbox'</span> <span class="string">'popupmenu'</span> }, <span class="keyword">...</span>
0251                       g = setfield(g, get(h(index), <span class="string">'tag'</span>), get(h(index), <span class="string">'value'</span>));
0252                 <span class="keyword">end</span>;
0253             <span class="keyword">catch</span>, <span class="keyword">end</span>;
0254         <span class="keyword">end</span>;
0255     <span class="keyword">end</span>;
0256</pre></div>

<hr><address>Generated on Wed 19-Aug-2015 18:06:23 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>